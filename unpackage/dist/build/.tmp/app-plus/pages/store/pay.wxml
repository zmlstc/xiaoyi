<view class="app" bind:__l="__l"><block wx:if="{{step==0}}"><view style="background:#FFFFFF;height:100%;width:100%;position:absolute;"><view class="price-box mt20"><view class="title"><view class="icon"></view>{{store_name}}</view><view class="content"><input class="input" type="number" maxlength="8" placeholder="实际消费金额" placeholder-class="placeholder f16" data-event-opts="{{[['input',[['__set_model',['$0','inmoney','$event',[]],['']]]]]}}" value="{{inmoney}}" bindinput="__e"/></view></view><text data-event-opts="{{[['tap',[['nextPay',['$event']]]]]}}" class="btn mt40" bindtap="__e">下一步</text></view></block><block wx:if="{{step==2}}"><view><view class="price-box"><view class="title"><view class="icon"></view>{{store_name}}</view><text class="price mb20">{{inmoney}}</text></view><view class="yt-list bg-1"><view data-event-opts="{{[['tap',[['toggleMask',['show']]]]]}}" class="yt-list-cell b-b b-line" bindtap="__e"><view class="cell-icon">券</view><text class="cell-tit clamp">优惠券</text><text class="cell-tip active">{{''+selectCouponTxt+''}}</text><text class="cell-more wanjia wanjia-gengduo-d"></text></view><view class="yt-list-cell b-b b-line"><text class="cell-tit clamp">实付金额</text><text class="cell-tip">{{"￥"+(inmoney-discount_money)}}</text></view><view class="yt-list-cell b-b"><text class="cell-tit clamp">优惠金额</text><text class="cell-tip red">{{"-￥"+discount_money}}</text></view></view><view class="pay-type-list"><view data-event-opts="{{[['tap',[['changePayType',[3]]]]]}}" class="type-item b-line" bindtap="__e"><text class="icon yticon icon-erjiye-yucunkuan"></text><view class="con"><text class="tit">预存款支付</text><text>{{"可用余额 ¥ "+memberInfo.available_predeposit}}</text></view><label class="radio"><radio value="" color="#00BAAD" checked="{{payType==3}}"></radio></label></view><view data-event-opts="{{[['tap',[['changePayType',[1]]]]]}}" class="type-item b-b b-line mb40" bindtap="__e"><text class="icon yticon icon-weixinzhifu"></text><view class="con"><text class="tit">微信支付</text><text>推荐使用微信支付</text></view><label class="radio"><radio value="" color="#00BAAD" checked="{{payType==1}}"></radio></label></view></view><text data-event-opts="{{[['tap',[['confirm',['$event']]]]]}}" class="btn" bindtap="__e">确认支付</text><view data-event-opts="{{[['tap',[['toggleMask',['$event']]]]]}}" class="{{['mask',maskState===0?'none':maskState===1?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="mask-content" catchtap="__e"><block wx:for="{{couponList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectcoupon',['$0'],[[['couponList','',index]]]]]]]}}" class="coupon-item" bindtap="__e"><view class="con"><view class="left"><text class="title">{{item.voucher_title}}</text><text class="time">{{"有效期至"+item.valid_time}}</text></view><view class="right"><text class="price">{{item.voucher_price}}</text><text>{{"满"+item.voucher_limit+"可用"}}</text></view><view class="circle l"></view><view class="circle r"></view></view><text class="tips">{{item.voucher_desc}}</text></view></block></view></view></view></block></view>