(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/consume"],{"1f92":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o("a34a")),s=o("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t,o,n,s,a,u){try{var r=e[a](u),i=r.value}catch(c){return void o(c)}r.done?t(i):Promise.resolve(i).then(n,s)}function r(e){return function(){var t=this,o=arguments;return new Promise(function(n,s){var a=e.apply(t,o);function r(e){u(a,n,s,r,i,"next",e)}function i(e){u(a,n,s,r,i,"throw",e)}r(void 0)})}}var i={data:function(){return{conslist:[],loadingText:"正在加载...",hasmore:!0,curpage:1,theIndex:null,oldIndex:null,isStop:!1}},computed:(0,s.mapState)(["hasLogin","userInfo"]),onLoad:function(){console.log("页面加载"," at pages\\member\\consume.vue:56"),this.loadData()},onReachBottom:function(){console.log("下拉加载..."," at pages\\member\\consume.vue:60"),this.curpage++,this.loadData()},onPageScroll:function(){console.log("页面滚动..."," at pages\\member\\consume.vue:65")},onPullDownRefresh:function(){console.log("上拉刷新..."," at pages\\member\\consume.vue:68"),e.stopPullDownRefresh()},methods:{loadData:function(){var t=r(n.default.mark(function t(){var o=this;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("===userInfo==="+this.hasLogin," at pages\\member\\consume.vue:73"),console.log(this.userInfo," at pages\\member\\consume.vue:74"),console.log(this.userInfo.token," at pages\\member\\consume.vue:75"),this.hasLogin){t.next=7;break}e.navigateTo({url:"login"}),t.next=11;break;case 7:if(this.hasmore){t.next=10;break}return this.loadingText="我是底线",t.abrupt("return",!1);case 10:this.$Request.post("member_order/orderlist",{curpage:this.curpage}).then(function(t){if(200==t.code){console.log(t," at pages\\member\\consume.vue:87"),o.hasmore=t.hasmore,console.log(o.hasmore," at pages\\member\\consume.vue:89");for(var n=t.datas.order_list,s=0;s<n.length;s++)o.conslist.push(n[s])}else e.showToast({icon:"none",title:t.datas.error,duration:2e3}),e.navigateTo({url:"login"})});case 11:case"end":return t.stop()}},t,this)}));function o(){return t.apply(this,arguments)}return o}(),toPage:function(t){e.navigateTo({url:t})},touchStart:function(e,t){console.log("====touchStart===="," at pages\\member\\consume.vue:115"),t.touches.length>1?this.isStop=!0:(this.oldIndex=this.theIndex,this.theIndex=null,this.initXY=[t.touches[0].pageX,t.touches[0].pageY])},touchMove:function(e,t){var o=this;if(console.log("====touchMove===="," at pages\\member\\consume.vue:127"),t.touches.length>1)this.isStop=!0;else{var n=t.touches[0].pageX-this.initXY[0],s=t.touches[0].pageY-this.initXY[1];this.isStop||Math.abs(n)<5||(Math.abs(s)>Math.abs(n)?this.isStop=!0:n<0?(this.theIndex=e,this.isStop=!0):n>0&&null!=this.theIndex&&this.oldIndex==this.theIndex&&(this.oldIndex=e,this.theIndex=null,this.isStop=!0,setTimeout(function(){o.oldIndex=null},150)))}},touchEnd:function(e,t){console.log("====touchEnd===="," at pages\\member\\consume.vue:160"),this.isStop=!1},deleteOrder:function(t){var o=this;console.log("====deleteOrder===="," at pages\\member\\consume.vue:166"),this.$Request.post("member_order/orderdelete",{orderid:t}).then(function(n){if(200==n.code){console.log(n," at pages\\member\\consume.vue:169");for(var s=o.conslist.length,a=0;a<s;a++)if(t==o.conslist[a].order_id){o.conslist.splice(a,1);break}o.oldIndex=null,o.theIndex=null}else e.showToast({icon:"none",title:n.datas.error,duration:2e3})})}}};t.default=i}).call(this,o("6e42")["default"])},"5dae":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},s=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return s})},"7aa9":function(e,t,o){"use strict";o.r(t);var n=o("1f92"),s=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},b4e3:function(e,t,o){"use strict";o.r(t);var n=o("5dae"),s=o("7aa9");for(var a in s)"default"!==a&&function(e){o.d(t,e,function(){return s[e]})}(a);o("d875");var u=o("2877"),r=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},d776:function(e,t,o){},d875:function(e,t,o){"use strict";var n=o("d776"),s=o.n(n);s.a}},[["8cd1","common/runtime","common/vendor"]]]);