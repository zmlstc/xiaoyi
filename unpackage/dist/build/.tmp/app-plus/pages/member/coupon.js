(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/coupon"],{"06d9":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("a34a")),a=o("2f62");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,o,n,a,s,u){try{var i=e[s](u),r=i.value}catch(l){return void o(l)}i.done?t(r):Promise.resolve(r).then(n,a)}function i(e){return function(){var t=this,o=arguments;return new Promise(function(n,a){var s=e.apply(t,o);function i(e){u(s,n,a,i,r,"next",e)}function r(e){u(s,n,a,i,r,"throw",e)}i(void 0)})}}var r={data:function(){return{list:[],loadingText:"正在加载...",hasmore:!0,curpage:1,theIndex:null,oldIndex:null,isStop:!1}},computed:(0,a.mapState)(["hasLogin","userInfo"]),onLoad:function(){console.log("页面加载"," at pages\\member\\coupon.vue:54"),this.loadData()},onReachBottom:function(){console.log("下拉加载..."," at pages\\member\\coupon.vue:58"),this.curpage++,this.loadData()},onPageScroll:function(){console.log("页面滚动..."," at pages\\member\\coupon.vue:63")},onPullDownRefresh:function(){console.log("上拉刷新..."," at pages\\member\\coupon.vue:66"),e.stopPullDownRefresh()},methods:{loadData:function(){var t=i(n.default.mark(function t(){var o=this;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("===userInfo==="+this.hasLogin," at pages\\member\\coupon.vue:71"),console.log(this.userInfo," at pages\\member\\coupon.vue:72"),console.log(this.userInfo.token," at pages\\member\\coupon.vue:73"),this.hasLogin){t.next=7;break}e.navigateTo({url:"login"}),t.next=11;break;case 7:if(this.hasmore){t.next=10;break}return this.loadingText="到底了",t.abrupt("return",!1);case 10:this.$Request.post("member_voucher/voucher_list",{curpage:this.curpage}).then(function(t){if(200==t.code){console.log(t," at pages\\member\\coupon.vue:85"),o.hasmore=t.hasmore,console.log(o.hasmore," at pages\\member\\coupon.vue:87");for(var n=t.datas.list,a=0;a<n.length;a++)o.list.push(n[a]);o.hasmore||(o.loadingText="到底了")}else e.showToast({icon:"none",title:t.datas.error,duration:2e3}),e.navigateTo({url:"login"})});case 11:case"end":return t.stop()}},t,this)}));function o(){return t.apply(this,arguments)}return o}(),toPage:function(t){e.navigateTo({url:t})},touchStart:function(e,t){console.log("====touchStart===="," at pages\\member\\coupon.vue:116"),t.touches.length>1?this.isStop=!0:(this.oldIndex=this.theIndex,this.theIndex=null,this.initXY=[t.touches[0].pageX,t.touches[0].pageY])},touchMove:function(e,t){var o=this;if(console.log("====touchMove===="," at pages\\member\\coupon.vue:128"),t.touches.length>1)this.isStop=!0;else{var n=t.touches[0].pageX-this.initXY[0],a=t.touches[0].pageY-this.initXY[1];this.isStop||Math.abs(n)<5||(Math.abs(a)>Math.abs(n)?this.isStop=!0:n<0?(this.theIndex=e,this.isStop=!0):n>0&&null!=this.theIndex&&this.oldIndex==this.theIndex&&(this.oldIndex=e,this.theIndex=null,this.isStop=!0,setTimeout(function(){o.oldIndex=null},150)))}},touchEnd:function(e,t){console.log("====touchEnd===="," at pages\\member\\coupon.vue:161"),this.isStop=!1},deleteOrder:function(t){var o=this;console.log("====deleteOrder===="," at pages\\member\\coupon.vue:167"),this.$Request.post("member_voucher/orderdelete",{orderid:t}).then(function(n){if(200==n.code){console.log(n," at pages\\member\\coupon.vue:170");for(var a=o.list.length,s=0;s<a;s++)if(t==o.list[s].order_id){o.list.splice(s,1);break}o.oldIndex=null,o.theIndex=null}else e.showToast({icon:"none",title:n.datas.error,duration:2e3})})}}};t.default=r}).call(this,o("6e42")["default"])},4205:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"4adf":function(e,t,o){"use strict";o.r(t);var n=o("06d9"),a=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},"91f9":function(e,t,o){"use strict";o.r(t);var n=o("4205"),a=o("4adf");for(var s in a)"default"!==s&&function(e){o.d(t,e,function(){return a[e]})}(s);o("bc0d");var u=o("2877"),i=Object(u["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=i.exports},bc0d:function(e,t,o){"use strict";var n=o("eb99"),a=o.n(n);a.a},eb99:function(e,t,o){}},[["1c1a","common/runtime","common/vendor"]]]);