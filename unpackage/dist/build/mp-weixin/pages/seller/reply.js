(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/seller/reply"],{"0719":function(e,t,o){"use strict";var n=o("69de"),i=o.n(n);i.a},"084a":function(e,t,o){"use strict";(function(e){o("1857"),o("921b");n(o("66fd"));var t=n(o("5a4a"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"3ac4":function(e,t,o){"use strict";o.r(t);var n=o("8ca9"),i=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},"5a4a":function(e,t,o){"use strict";o.r(t);var n=o("e602"),i=o("3ac4");for(var s in i)"default"!==s&&function(e){o.d(t,e,function(){return i[e]})}(s);o("0719");var a=o("2877"),l=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,null,null);t["default"]=l.exports},"69de":function(e,t,o){},"8ca9":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("a34a")),i=o("2f62");function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,o,n,i,s,a){try{var l=e[s](a),r=l.value}catch(u){return void o(u)}l.done?t(r):Promise.resolve(r).then(n,i)}function l(e){return function(){var t=this,o=arguments;return new Promise(function(n,i){var s=e.apply(t,o);function l(e){a(s,n,i,l,r,"next",e)}function r(e){a(s,n,i,l,r,"throw",e)}l(void 0)})}}var r=function(){return o.e("components/uni-rate/uni-rate").then(o.bind(null,"556a"))},u={data:function(){return{datalist:[],elist:[],loadingText:"正在加载...",hasmore:!0,curpage:1,replytype:0,replyTxt:"",logining:!1,isshowreply:0}},components:{uniRate:r},computed:(0,i.mapState)(["sellerHasLogin"]),onLoad:function(){this.loadData()},onShow:function(){console.log("页面显示..")},onReady:function(){console.log("页面初次显示")},onHide:function(){console.log("页面隐藏")},onUnload:function(){console.log("页面卸载")},onBackPress:function(){console.log("页面返回...")},onShareAppMessage:function(){console.log("分享!")},onReachBottom:function(){console.log("下拉加载..."),console.log("正在加载中..."),this.curpage++,this.loadData()},onPageScroll:function(){console.log("页面滚动...")},onPullDownRefresh:function(){console.log("上拉刷新..."),e.stopPullDownRefresh()},methods:{loadData:function(){var t=l(n.default.mark(function t(){return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("===sellerHasLogin==="+this.sellerHasLogin),this.sellerHasLogin?1==this.replytype?this.showReply():0==this.replytype&&this.showNoReply():e.navigateTo({url:"login"});case 2:case"end":return t.stop()}},t,this)}));function o(){return t.apply(this,arguments)}return o}(),previewImg:function(t,o){e.previewImage({current:t,urls:o})},showNoReply:function(){var t=this;if(!this.hasmore)return this.loadingText="到底了",!1;this.$Request.post("seller_evaluate/list",{curpage:this.curpage,type:0}).then(function(o){if(200==o.code){console.log(o),t.hasmore=o.hasmore,console.log(t.hasmore);for(var n=o.datas.eval_list,i=0;i<n.length;i++)t.elist.push(n[i]);if(!t.hasmore)return t.loadingText="到底了",!1}else e.showToast({icon:"none",title:o.datas.error,duration:2e3}),e.navigateTo({url:"login"})})},showReply:function(){var t=this;if(!this.hasmore)return this.loadingText="到底了",!1;this.$Request.post("seller_evaluate/list",{curpage:this.curpage,type:1}).then(function(o){if(200==o.code){console.log(o),t.hasmore=o.hasmore,console.log(t.hasmore);for(var n=o.datas.eval_list,i=0;i<n.length;i++)t.datalist.push(n[i]);if(!t.hasmore)return t.loadingText="到底了",!1}else e.showToast({icon:"none",title:o.datas.error,duration:2e3}),e.navigateTo({url:"login"})})},showTab:function(t){e.hideLoading(),this.replytype=t,this.hasmore=!0,this.loadingText="正在加载...",this.datalist=[],this.elist=[],this.loadData()},inputChange:function(e){this.replyTxt=e.detail.value},formSubmit:function(t){var o=this;return""==this.replyTxt?(e.showToast({title:"请填写回复内容",icon:"none"}),!1):0==this.isshowreply?(e.showToast({title:"回复编号错误",icon:"none"}),!1):(e.showLoading({title:"正在处理中..."}),o.logining=!0,void o.$Request.post("seller_evaluate/save",{explain:o.replyTxt,id:o.isshowreply}).then(function(t){200==t.code?(console.log(t),e.showToast({icon:"none",title:"回复成功！",duration:3e3,success:function(){setTimeout(function(){for(var e=o.elist.length,t=0;t<e;t++)if(o.isshowreply==o.elist[t].seval_id){o.elist.splice(t,1);break}o.logining=!1},2e3)}})):e.showToast({icon:"none",title:t.datas.error,duration:2e3,success:function(){o.logining=!1}}),e.hideLoading()}))},toShow:function(e){this.isshowreply=e,this.replyTxt=""},delseval:function(t){var o=this;e.showModal({title:"提示",content:"确认要删除吗？",success:function(n){n.confirm?(e.showLoading({title:"正在处理中..."}),o.$Request.post("seller_evaluate/delevl",{id:t}).then(function(n){200==n.code?(console.log(n),e.showToast({icon:"none",title:"删除成功！",duration:3e3,success:function(){setTimeout(function(){for(var e=o.datalist.length,n=0;n<e;n++)if(t==o.datalist[n].seval_id){o.datalist[n].reply_del=1;break}o.logining=!1},2e3)}})):e.showToast({icon:"none",title:n.datas.error,duration:2e3,success:function(){o.logining=!1}}),e.hideLoading()})):n.cancel&&console.log("用户点击取消")}})}}};t.default=u}).call(this,o("543d")["default"])},e602:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return i})}},[["084a","common/runtime","common/vendor"]]]);