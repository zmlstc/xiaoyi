(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/cate"],{"0cb5":function(t,n,a){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=c(a("a34a")),o=c(a("0410")),i=a("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function s(t,n,a,e,o,i,c){try{var s=t[i](c),r=s.value}catch(u){return void a(u)}s.done?n(r):Promise.resolve(r).then(e,o)}function r(t){return function(){var n=this,a=arguments;return new Promise(function(e,o){var i=t.apply(n,a);function c(t){s(i,e,o,c,r,"next",t)}function r(t){s(i,e,o,c,r,"throw",t)}c(void 0)})}}var u=function(){return a.e("components/uni-rate/uni-rate").then(a.bind(null,"556a"))},l={data:function(){return{city:"广州",bigId:1,bannerImg:[],tabIndex:0,tabClasslist:[],storelist:[],page:1,loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},mapinfo:[],cateid:0}},components:{uniRate:u},computed:(0,i.mapState)(["Location"]),onLoad:function(t){""!=t.id&&t.id>0&&(this.cateid=t.id,this.tabIndex=t.id);var n=this;n.tabClasslist=[{sc_name:"首页",sc_id:"-1"},{sc_name:"全部",sc_id:"0"}],n.$Request.post("index").then(function(t){if(200==t.code){if(console.log(t),n.pgList=t.datas.pglist,n.bannerImg=t.datas.aplist,t.datas.sc_list)for(var a=0;a<t.datas.sc_list.length;a++)n.tabClasslist.push(t.datas.sc_list[a]);console.log(n.tabClasslist)}}),console.log(this.Location),"{}"!==JSON.stringify(this.Location)?(console.log("==not null==="),this.mapinfo=this.Location,this.city=this.Location.city_name,1==this.Location.has_agent&&(this.has_agent=!0),this.loadData()):this.locationMap()},methods:{loadData:function(){var t=r(e.default.mark(function t(){var n;return e.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=this,n.$Request.post("shop/shop_list",{cateid:n.cateid,page:10,curpage:n.page,lat:n.mapinfo.lat,lng:n.mapinfo.lng,adcode:n.mapinfo.adcode,city_id:n.mapinfo.city_id}).then(function(t){200==t.code&&(console.log(t),n.storelist=t.datas.store_list,console.log(n.tabClasslist))});case 2:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),locationMap:function(){var t=this,n=this;n.amapPlugin=new o.default.AMapWX({key:"57796d182a0849a4bff2b46fd6088ed3"}),n.amapPlugin.getRegeo({success:function(a){n.mapinfo={lat:a[0].latitude,lng:a[0].longitude,adcode:a[0].regeocodeData.addressComponent.adcode},console.log("-----amap---------"),console.log(a),n.city=a[0].regeocodeData.addressComponent.city.replace(/市/g,""),t.loadData()}})},swiperChange:function(t){this.bigId=t.detail.current},toSearch:function(){t.navigateTo({url:"/pages/search/search"})},toCity:function(){console.log("tocity"),t.navigateTo({url:"/pages/index/city?url=cate"})},toStore:function(n){t.navigateTo({url:"/pages/store/index?store_id="+n})},toCategory:function(n){t.navigateTo({url:n})},toPage:function(n){t.navigateTo({url:"/pages/member/points/pinfo?id="+n})},tapTab:function(n){this.cateid=n,this.tabIndex=n,-1==n?t.switchTab({url:"index"}):this.loadData()}}};n.default=l}).call(this,a("543d")["default"])},"7a6b":function(t,n,a){"use strict";a.r(n);var e=a("0cb5"),o=a.n(e);for(var i in e)"default"!==i&&function(t){a.d(n,t,function(){return e[t]})}(i);n["default"]=o.a},8626:function(t,n,a){"use strict";(function(t){a("1857"),a("921b");e(a("66fd"));var n=e(a("ead5"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,a("543d")["createPage"])},bf17:function(t,n,a){"use strict";var e=a("c42f"),o=a.n(e);o.a},c42f:function(t,n,a){},cbce:function(t,n,a){"use strict";var e=function(){var t=this,n=t.$createElement;t._self._c},o=[];a.d(n,"a",function(){return e}),a.d(n,"b",function(){return o})},ead5:function(t,n,a){"use strict";a.r(n);var e=a("cbce"),o=a("7a6b");for(var i in o)"default"!==i&&function(t){a.d(n,t,function(){return o[t]})}(i);a("bf17");var c=a("2877"),s=Object(c["a"])(o["default"],e["a"],e["b"],!1,null,null,null);n["default"]=s.exports}},[["8626","common/runtime","common/vendor"]]]);