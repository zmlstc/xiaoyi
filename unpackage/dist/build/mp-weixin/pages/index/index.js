(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0ef3":function(t,n,e){},"182a":function(t,n,e){"use strict";e.r(n);var a=e("66fe"),o=e("fdd0");for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);e("7c38");var s=e("2877"),c=Object(s["a"])(o["default"],a["a"],a["b"],!1,null,null,null);n["default"]=c.exports},3495:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("a34a")),o=s(e("0410")),i=e("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function c(t,n,e,a,o,i,s){try{var c=t[i](s),r=c.value}catch(l){return void e(l)}c.done?n(r):Promise.resolve(r).then(a,o)}function r(t){return function(){var n=this,e=arguments;return new Promise(function(a,o){var i=t.apply(n,e);function s(t){c(i,a,o,s,r,"next",t)}function r(t){c(i,a,o,s,r,"throw",t)}s(void 0)})}}function l(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},a=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.forEach(function(n){u(t,n,e[n])})}return t}function u(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var f=function(){return e.e("components/uni-rate/uni-rate").then(e.bind(null,"556a"))},d={data:function(){return{city:"定位中",bigId:1,bannerImg:[],tabIndex:0,tabClasslist:[],navlist:[{id:1,name:"分类",url:"/pages/index/cate",img:"https://www.fhlego.com/static/2.png"},{id:2,name:"邀请",url:"/pages/member/invite",img:"https://www.fhlego.com/static/3.png"},{id:3,name:"积分",url:"/pages/member/points/pshop",img:"https://www.fhlego.com/static/4.png"},{id:4,name:"签到",url:"/pages/member/signin",img:"https://www.fhlego.com/static/1.png"},{id:5,name:"帮助",url:"/pages/index/news",img:"https://www.fhlego.com/static/5.png"}],pgList:[],storelist:[],page:1,loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},mapinfo:[],p_page:0,has_agent:!0}},components:{uniRate:f},computed:(0,i.mapState)(["Location"]),onLoad:function(){var t=this;t.tabClasslist=[{sc_name:"首页",sc_id:"0"},{sc_name:"分类",sc_id:"-1"}],t.$Request.post("index").then(function(n){if(200==n.code){if(console.log(n),t.bannerImg=n.datas.aplist,n.datas.sc_list)for(var e=0;e<n.datas.sc_list.length;e++)t.tabClasslist.push(n.datas.sc_list[e]);console.log(t.tabClasslist)}}),console.log(this.Location),"{}"!==JSON.stringify(this.Location)?(console.log("==Location not null==="),this.mapinfo=this.Location,this.city=this.Location.city_name,1==this.Location.has_agent?this.has_agent=!0:t.has_agent=!1,this.loadData()):this.locationMap()},onShow:function(t){console.log("页面显示..")},methods:l({},(0,i.mapMutations)(["setLocation"]),{loadData:function(){var t=r(a.default.mark(function t(){var n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=this,this.storelist=[],this.reflist(),console.log("---------------mapinfo-----"),console.log(this.mapinfo),this.$Request.post("shop/shop_list",{page:10,curpage:this.page,lat:this.mapinfo.lat,lng:this.mapinfo.lng,adcode:this.mapinfo.adcode,city_id:this.mapinfo.city_id}).then(function(t){200==t.code&&(console.log(t),n.storelist=t.datas.store_list)});case 6:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),locationMap:function(){var t=this,n=this;this.amapPlugin=new o.default.AMapWX({key:"57796d182a0849a4bff2b46fd6088ed3"}),n.amapPlugin.getRegeo({success:function(e){console.log("-----amap---------"),console.log(e),n.$Request.post("area/getareainfo",{adcode:e[0].regeocodeData.addressComponent.adcode}).then(function(a){if(200==a.code){console.log(a),n.city=a.datas.areainfo.area_name;var o={lat:e[0].latitude,lng:e[0].longitude,city_id:a.datas.areainfo.area_id,city_name:a.datas.areainfo.shortname,has_agent:a.datas.has_agent};n.setLocation(o),t.mapinfo=o,1==a.datas.has_agent?n.has_agent=!0:n.has_agent=!1}n.loadData()})}})},swiperChange:function(t){},toSearch:function(){t.navigateTo({url:"/pages/search/search"})},toCity:function(){t.navigateTo({url:"/pages/index/city"})},toStore:function(n){t.navigateTo({url:"/pages/store/index?store_id="+n})},toCategory:function(n){t.navigateTo({url:n})},toUrl:function(n){t.navigateTo({url:n})},toPage:function(n){t.navigateTo({url:"/pages/member/points/pinfo?id="+n})},tapTab:function(n){t.navigateTo({url:"cate?id="+n})},reflist:function(){var t=this;t.pgList=[],t.p_page++,t.$Request.post("index/pglist",{curpage:this.p_page,cityid:this.mapinfo.city_id}).then(function(n){200==n.code&&(console.log(n),n.datas.pglist.length>0&&(t.pgList=n.datas.pglist))})}})};n.default=d}).call(this,e("543d")["default"])},"66fe":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement;t._self._c},o=[];e.d(n,"a",function(){return a}),e.d(n,"b",function(){return o})},"7c38":function(t,n,e){"use strict";var a=e("0ef3"),o=e.n(a);o.a},a8ec:function(t,n,e){"use strict";(function(t){e("1857"),e("921b");a(e("66fd"));var n=a(e("182a"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},fdd0:function(t,n,e){"use strict";e.r(n);var a=e("3495"),o=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);n["default"]=o.a}},[["a8ec","common/runtime","common/vendor"]]]);