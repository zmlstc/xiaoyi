(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/points/pshop"],{1164:function(t,e,o){},"23b2":function(t,e,o){"use strict";o.r(e);var n=o("85f9"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},"4dbb":function(t,e,o){"use strict";(function(t){o("1857"),o("921b");n(o("66fd"));var e=n(o("65a1"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"5f99":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},"62dd":function(t,e,o){"use strict";var n=o("1164"),i=o.n(n);i.a},"65a1":function(t,e,o){"use strict";o.r(e);var n=o("5f99"),i=o("23b2");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("62dd");var s=o("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"85f9":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(o("a34a")),i=o("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,o,n,i,a,s){try{var r=t[a](s),l=r.value}catch(u){return void o(u)}r.done?e(l):Promise.resolve(l).then(n,i)}function r(t){return function(){var e=this,o=arguments;return new Promise(function(n,i){var a=t.apply(e,o);function r(t){s(a,n,i,r,l,"next",t)}function l(t){s(a,n,i,r,l,"throw",t)}r(void 0)})}}var l=function(){return o.e("components/sl-filter/sl-filter").then(o.bind(null,"e160"))},u={data:function(){return{datalist:[],loadingText:"正在加载...",hasmore:!0,curpage:1,predepoit:"",memberpoints:"--",city:"定位中",themeColor:"#000000",titleColor:"#666666",menuList:[{title:"排序",key:"sort",isSort:!0,reflexTitle:!0,detailList:[{title:"默认排序",value:"0"},{title:"按人气高至低",value:"hot"},{title:"按价值高至低",value:"pointsdesc"},{title:"按结束时间降序",value:"etime"}]},{title:"兑换",key:"isable",isSort:!0,reflexTitle:!0,detailList:[{title:"全部",value:"0"},{title:"我能兑换",value:"1"}]}],bysort:"",isable:0}},components:{slFilter:l},computed:(0,i.mapState)(["hasLogin","userInfo","Location"]),onLoad:function(){var t=this;t.city=t.Location.city_name,console.log("页面加载"),t.hasLogin&&t.$Request.post("pointprod/getmemberinfo").then(function(e){200==e.code&&(console.log(e),t.memberpoints=e.datas.member.member_points)}),t.loadData()},onReachBottom:function(){console.log("正在加载中..."),this.curpage++,this.loadData()},onPageScroll:function(){console.log("页面滚动...")},onPullDownRefresh:function(){console.log("上拉刷新..."),t.stopPullDownRefresh()},methods:{result:function(t){console.log(t);var e=JSON.parse(JSON.stringify(t)),o=Object.keys(e);console.log(o),"isable"==o[0]?e["isable"]!=this.isable&&(this.isable=e["isable"],this.clearData(),this.loadData()):"sort"==o[0]&&e["sort"]!=this.bysort&&(this.bysort=e["sort"],this.clearData(),this.loadData())},clearData:function(){this.datalist=[],this.loadingText="正在加载...",this.hasmore=!0,this.curpage=1},loadData:function(){var e=r(n.default.mark(function e(){var o,i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=this,console.log("===userInfo==="+this.hasLogin),console.log(this.userInfo),console.log(this.userInfo.token),this.hasmore){e.next=7;break}return this.loadingText="到底了",e.abrupt("return",!1);case 7:i={curpage:o.curpage,cityid:o.Location.city_id,isable:o.isable,orderby:o.bysort},o.$Request.post("pointprod/index",i).then(function(e){if(200==e.code){console.log(e),o.hasmore=e.hasmore,console.log(o.hasmore);for(var n=e.datas.list,i=0;i<n.length;i++)o.datalist.push(n[i]);if(!e.hasmore)return o.loadingText="到底了",!1}else t.showToast({icon:"none",title:e.datas.error,duration:2e3}),t.navigateTo({url:"login"})});case 9:case"end":return e.stop()}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),toPage:function(e){this.hasLogin||(e="/pages/member/login"),t.navigateTo({url:e})},toCity:function(){t.navigateTo({url:"/pages/index/city?url=/pages/member/points/pshop"})}}};e.default=u}).call(this,o("543d")["default"])}},[["4dbb","common/runtime","common/vendor"]]]);