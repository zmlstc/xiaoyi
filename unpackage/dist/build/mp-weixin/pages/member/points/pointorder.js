(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/points/pointorder"],{2932:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("a34a")),a=e("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function r(t,o,e,n,a,i,r){try{var s=t[i](r),u=s.value}catch(l){return void e(l)}s.done?o(u):Promise.resolve(u).then(n,a)}function s(t){return function(){var o=this,e=arguments;return new Promise(function(n,a){var i=t.apply(o,e);function s(t){r(i,n,a,s,u,"next",t)}function u(t){r(i,n,a,s,u,"throw",t)}s(void 0)})}}var u=function(){return Promise.all([e.e("common/vendor"),e.e("components/tki-qrcode/tki-qrcode")]).then(e.bind(null,"0c69"))},l={data:function(){return{datalist:[],loadingText:"正在加载...",hasmore:!0,curpage:1,maskState:0,state:20,ifShow:!0,val:"POINTS:",size:400,unit:"upx",icon:"",iconsize:40,lv:3,onval:!0,loadMake:!1,src:""}},computed:(0,a.mapState)(["hasLogin","userInfo"]),components:{tkiQrcode:u},onLoad:function(){console.log("页面加载"),this.loadData()},onReachBottom:function(){console.log("正在加载中..."),this.curpage++,this.loadData()},onPageScroll:function(){console.log("页面滚动...")},onPullDownRefresh:function(){console.log("上拉刷新..."),t.stopPullDownRefresh()},methods:{loadData:function(){var o=s(n.default.mark(function o(){var e;return n.default.wrap(function(o){while(1)switch(o.prev=o.next){case 0:if(e=this,console.log("===userInfo==="+this.hasLogin),console.log(this.userInfo),console.log(this.userInfo.token),this.hasmore){o.next=7;break}return this.loadingText="到底了",o.abrupt("return",!1);case 7:this.hasLogin?this.$Request.post("member_pointorder/orderlist",{curpage:e.curpage,state:e.state}).then(function(o){if(200==o.code){console.log(o),e.hasmore=o.hasmore,e.hasmore||(e.loadingText="到底了"),console.log(e.hasmore);for(var n=o.datas.list,a=0;a<n.length;a++)e.datalist.push(n[a])}else t.showToast({icon:"none",title:o.datas.error,duration:2e3}),t.navigateTo({url:"login"})}):url="/pages/member/login";case 8:case"end":return o.stop()}},o,this)}));function e(){return o.apply(this,arguments)}return e}(),toPage:function(o){this.hasLogin||(o="/pages/member/login"),t.navigateTo({url:o})},clickBar:function(t){this.state!=t&&(this.state=t,this.hasmore=!0,this.curpage=1,this.datalist=[],this.loadingText="正在加载...",this.loadData())},toggleMask:function(t,o){var e=this;console.log("---type----"+t),this.val="POINTS:"+o,this.$refs.qrcode._makeCode();var n="show"===t?10:300,a="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=a},n)},stopPrevent:function(t){console.log("======stopPrevent====="),console.log(t)},qrR:function(t){this.src=t},toDel:function(o){var e=this;t.showModal({title:"提示",content:"确认要删除吗？",success:function(n){n.confirm&&(t.showLoading({title:"正在处理中..."}),e.$Request.post("member_pointorder/orderdel",{orderid:o}).then(function(n){if(200==n.code){console.log(n);for(var a=e.datalist.length,i=0;i<a;i++)if(o==e.datalist[i].point_orderid){e.datalist.splice(i,1);break}t.hideLoading()}else t.hideLoading(),t.showToast({icon:"none",title:n.datas.error,duration:2e3})}))}})}}};o.default=l}).call(this,e("543d")["default"])},5643:function(t,o,e){"use strict";e.r(o);var n=e("b9a3"),a=e("6a89");for(var i in a)"default"!==i&&function(t){e.d(o,t,function(){return a[t]})}(i);e("d197");var r=e("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,null,null);o["default"]=s.exports},"6a89":function(t,o,e){"use strict";e.r(o);var n=e("2932"),a=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(o,t,function(){return n[t]})}(i);o["default"]=a.a},b9a3:function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},a=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return a})},d197:function(t,o,e){"use strict";var n=e("f3a7"),a=e.n(n);a.a},e5b4:function(t,o,e){"use strict";(function(t){e("1857"),e("921b");n(e("66fd"));var o=n(e("5643"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},f3a7:function(t,o,e){}},[["e5b4","common/runtime","common/vendor"]]]);