(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/consume"],{2520:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},"6a3c":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("a34a")),i=o("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,o,n,i,s,r){try{var a=t[s](r),u=a.value}catch(l){return void o(l)}a.done?e(u):Promise.resolve(u).then(n,i)}function a(t){return function(){var e=this,o=arguments;return new Promise(function(n,i){var s=t.apply(e,o);function a(t){r(s,n,i,a,u,"next",t)}function u(t){r(s,n,i,a,u,"throw",t)}a(void 0)})}}var u={data:function(){return{conslist:[],loadingText:"正在加载...",hasmore:!0,curpage:1,theIndex:null,oldIndex:null,isStop:!1}},computed:(0,i.mapState)(["hasLogin","userInfo"]),onLoad:function(){console.log("页面加载"),this.loadData()},onReachBottom:function(){console.log("下拉加载..."),this.curpage++,this.loadData()},onPageScroll:function(){console.log("页面滚动...")},onPullDownRefresh:function(){console.log("上拉刷新..."),t.stopPullDownRefresh()},methods:{loadData:function(){var e=a(n.default.mark(function e(){var o,i=this;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=this,console.log("===userInfo==="+this.hasLogin),console.log(this.userInfo),this.hasLogin){e.next=7;break}t.navigateTo({url:"login"}),e.next=11;break;case 7:if(this.hasmore){e.next=10;break}return this.loadingText="我是底线",e.abrupt("return",!1);case 10:o.$Request.post("member_order/orderlist",{curpage:o.curpage}).then(function(e){if(200==e.code){console.log(e),o.hasmore=e.hasmore,console.log(o.hasmore);for(var n=e.datas.order_list,s=0;s<n.length;s++)o.conslist.push(n[s]);if(!i.hasmore)return i.loadingText="我是底线",!1}else t.showToast({icon:"none",title:e.datas.error,duration:2e3}),t.navigateTo({url:"login"})});case 11:case"end":return e.stop()}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),toPage:function(e){t.navigateTo({url:e})},toStore:function(e){t.navigateTo({url:"/pages/store/index?store_id="+e})},touchStart:function(t,e){console.log("====touchStart===="),e.touches.length>1?this.isStop=!0:(this.oldIndex=this.theIndex,this.theIndex=null,this.initXY=[e.touches[0].pageX,e.touches[0].pageY])},touchMove:function(t,e){var o=this;if(console.log("====touchMove===="),e.touches.length>1)this.isStop=!0;else{var n=e.touches[0].pageX-this.initXY[0],i=e.touches[0].pageY-this.initXY[1];this.isStop||Math.abs(n)<5||(Math.abs(i)>Math.abs(n)?this.isStop=!0:n<0?(this.theIndex=t,this.isStop=!0):n>0&&null!=this.theIndex&&this.oldIndex==this.theIndex&&(this.oldIndex=t,this.theIndex=null,this.isStop=!0,setTimeout(function(){o.oldIndex=null},150)))}},touchEnd:function(t,e){console.log("====touchEnd===="),this.isStop=!1},deleteOrder:function(e){var o=this;console.log("====deleteOrder===="),o.$Request.post("member_order/orderdelete",{orderid:e}).then(function(n){if(200==n.code){console.log(n);for(var i=o.conslist.length,s=0;s<i;s++)if(e==o.conslist[s].order_id){o.conslist.splice(s,1);break}o.oldIndex=null,o.theIndex=null}else t.showToast({icon:"none",title:n.datas.error,duration:2e3})})}}};e.default=u}).call(this,o("543d")["default"])},"7aa9":function(t,e,o){"use strict";o.r(e);var n=o("6a3c"),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},"8cd1":function(t,e,o){"use strict";(function(t){o("1857"),o("921b");n(o("66fd"));var e=n(o("b4e3"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},a87b:function(t,e,o){},b4e3:function(t,e,o){"use strict";o.r(e);var n=o("2520"),i=o("7aa9");for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);o("d875");var r=o("2877"),a=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},d875:function(t,e,o){"use strict";var n=o("a87b"),i=o.n(n);i.a}},[["8cd1","common/runtime","common/vendor"]]]);