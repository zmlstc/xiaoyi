(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/evallist"],{"838d":function(t,e,n){"use strict";n.r(e);var o=n("fbf9"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},8450:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},"913f":function(t,e,n){"use strict";var o=n("b165"),a=n.n(o);a.a},a2f0:function(t,e,n){"use strict";n.r(e);var o=n("8450"),a=n("838d");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("913f");var s=n("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},b165:function(t,e,n){},c14d:function(t,e,n){"use strict";(function(t){n("1857"),n("921b");o(n("66fd"));var e=o(n("a2f0"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},fbf9:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),a=n("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,a,i,s){try{var r=t[i](s),u=r.value}catch(l){return void n(l)}r.done?e(u):Promise.resolve(u).then(o,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function r(t){s(i,o,a,r,u,"next",t)}function u(t){s(i,o,a,r,u,"throw",t)}r(void 0)})}}var u=function(){return n.e("components/uni-rate/uni-rate").then(n.bind(null,"556a"))},l={data:function(){return{orderlist:[],datalist:[],loadingText:"正在加载...",hasmore:!0,curpage:1,showtype:0}},components:{uniRate:u},computed:(0,a.mapState)(["hasLogin","userInfo"]),onLoad:function(){if(console.log("页面加载"),!this.hasLogin)return t.navigateTo({url:"login"}),!1;this.loadData()},onBackPress:function(t){console.log("==onBackPress===")},onUnload:function(){console.log("页面卸载")},onReachBottom:function(){console.log("正在加载中..."),this.curpage++,this.loadData()},onPullDownRefresh:function(){t.stopPullDownRefresh()},methods:{loadData:function(){var e=r(o.default.mark(function e(){return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this,this.hasLogin?1==this.showtype?this.showPinLunList():0==this.showtype&&this.showOrderList():t.navigateTo({url:"login"});case 2:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),showOrderList:function(){var t=this;if(!this.hasmore)return this.loadingText="到底了",!1;t.$Request.post("member_evaluate/orderlist",{curpage:t.curpage}).then(function(e){if(200==e.code){console.log(e),t.hasmore=e.hasmore,console.log(t.hasmore);for(var n=e.datas.order_list,o=0;o<n.length;o++)t.orderlist.push(n[o]);e.hasmore||(t.loadingText="到底了")}})},showPinLunList:function(){var t=this;if(!this.hasmore)return this.loadingText="到底了",!1;t.$Request.post("member_evaluate/list",{curpage:t.curpage}).then(function(e){if(200==e.code){console.log(e),t.hasmore=e.hasmore,console.log(t.hasmore);for(var n=e.datas.eval_list,o=0;o<n.length;o++)t.datalist.push(n[o]);e.hasmore||(t.loadingText="到底了")}})},toEval:function(e){t.navigateTo({url:"comment?id="+e})},showTab:function(e){t.hideLoading(),this.showtype=e,this.hasmore=!0,this.loadingText="正在加载...",this.datalist=[],this.orderlist=[],this.loadData()},previewImg:function(e,n){t.previewImage({current:e,urls:n})},deleteEval:function(e){var n=this;t.showModal({title:"提示",content:"确认要删除吗？",success:function(o){o.confirm?(t.showLoading({title:"正在删除..."}),n.$Request.post("member_evaluate/eval_delete",{eval_id:e}).then(function(o){if(200==o.code){console.log(o);for(var a=n.datalist.length,i=0;i<a;i++)if(e==n.datalist[i].seval_id){n.datalist.splice(i,1);break}t.hideLoading()}else t.showLoading({title:o.datas.error+""}),setTimeout(function(){t.hideLoading()},1500)})):o.cancel&&console.log("用户点击取消")}})}}};e.default=l}).call(this,n("543d")["default"])}},[["c14d","common/runtime","common/vendor"]]]);