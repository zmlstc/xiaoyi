<view><block wx:if="{{step==0}}"><view class="pay-step1"><view class="price-box mt20"><view class="title"><image class="icon" src="{{store_avatar}}"></image>{{store_name}}</view><view class="content"><text>￥</text><input type="digit" maxlength="8" placeholder="实际消费金额" placeholder-class="placeholder f16" data-event-opts="{{[['input',[['__set_model',['','inmoney','$event',[]]]]]]}}" value="{{inmoney}}" bindinput="__e"/></view></view><view class="warn mt10">请认真核对商家名称，避免支付错误！</view><text data-event-opts="{{[['tap',[['nextPay',['$event']]]]]}}" class="btn mt40" bindtap="__e">下一步</text></view></block><block wx:if="{{step==2}}"><view class="pay-step2"><view class="price-box"><view class="title"><image class="icon" src="{{store_avatar}}"></image>{{store_name}}</view><text class="price mb20">{{inmoney}}</text></view><view class="yt-list bg-1"><view data-event-opts="{{[['tap',[['toggleMask',['show']]]]]}}" class="yt-list-cell b-b b-line" bindtap="__e"><view class="cell-icon">券</view><text class="cell-tit clamp">优惠券</text><text class="cell-tip active">{{''+selectCouponTxt+''}}</text><text class="cell-more wanjia wanjia-gengduo-d"></text></view><view class="yt-list-cell b-b b-line"><text class="cell-tit clamp">实付金额</text><text class="cell-tip">￥<text>{{inmoney-discount_money}}</text></text></view><view class="yt-list-cell b-b"><text class="cell-tit clamp">优惠金额</text><text class="cell-tip red">{{"-"+discount_money+"元"}}</text></view></view><view class="pay-type-list"><view data-event-opts="{{[['tap',[['changePayType',[3]]]]]}}" class="type-item b-line" bindtap="__e"><view class="icon yticon yue"></view><view class="con"><text class="tit">预存款支付</text><text>{{"可用余额 ¥ "+memberInfo.available_predeposit}}</text></view><label class="radio"><radio value="" color="#00BAAD" checked="{{payType==3}}"></radio></label></view><view data-event-opts="{{[['tap',[['changePayType',[1]]]]]}}" class="type-item b-b b-line mb40" bindtap="__e"><text class="icon yticon icon-weixinzhifu"></text><view class="con"><text class="tit">微信支付</text><text>推荐使用微信支付</text></view><label class="radio"><radio value="" color="#00BAAD" checked="{{payType==1}}"></radio></label></view></view><button class="btn" disabled="{{logining}}" data-event-opts="{{[['tap',[['confirm',['$event']]]]]}}" bindtap="__e">确认支付</button><view data-event-opts="{{[['tap',[['toggleMask',['$event']]]]]}}" class="{{['mask',maskState===0?'none':maskState===1?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="mask-content" catchtap="__e"><block wx:if="{{couponList&&couponList.length>0}}"><view class="coupon-item"><block wx:for="{{couponList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectcoupon',['$0'],[[['couponList','',index]]]]]]]}}" bindtap="__e"><view class="con"><view class="left"><text class="title">{{item.voucher_title}}</text></view><view class="right"><text class="price">{{item.voucher_price}}</text></view><view class="circle l"></view><view class="circle r"></view></view><view class="tip"><text class="time">{{"有效期至"+item.valid_time}}</text><text class="factor">{{"满"+item.voucher_limit+"可用"}}</text></view></view></block></view></block><block wx:else><view class="no-info"><view class="content"><view class="icon"></view><view class="text">暂无可用优惠券</view></view></view></block></view></view><block wx:if="{{mask}}"><view class="shop-pay"><view class="{{['masks',bott]}}"><view class="pay-tip"><view data-event-opts="{{[['tap',[['maskss']]]]}}" class="close" bindtap="__e">×</view><view class="tip">请输入支付密码</view></view><view class="psdnum-box"><block wx:for="{{pasList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="flex:1;"><view class="pass"><text hidden="{{!(pwdnum>index)}}" class="text">●</text></view></view></block></view><view class="pay-num"><block wx:for="{{numbr}}" wx:for-item="num" wx:for-index="indexs" wx:key="indexs"><view class="password" hover-class="hover" hover-stay-time="{{20}}" data-event-opts="{{[['tap',[['checkNum',['$0'],[[['numbr','',indexs]]]]]]]}}" bindtap="__e">{{''+num+''}}</view></block><view data-event-opts="{{[['tap',[['reset']]]]}}" class="password" style="background:#00BAAD;color:#fff;" bindtap="__e">重置</view><view class="password" hover-class="hover" hover-stay-time="{{20}}" data-event-opts="{{[['tap',[['checkNum',[0]]]]]}}" bindtap="__e">0</view><view data-event-opts="{{[['tap',[['backspace']]]]}}" class="password" style="background:#00BAAD;color:#fff;" bindtap="__e">删除</view></view></view></view></block></view></block></view>